<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>PHP 4 a&nbsp;PHP 5 zároveň na jednom fyzickém serveru s Windows XP</title>
	<style type="text/css">
		h1, h2, h3 { margin-bottom: 0.2em; font-family: "Arial", sans-serif; }
		h1 { font-size: 1.4em; }
		h2 { font-size: 1.2em; font-style: italic; }
		p { margin-bottom: 0.2em; clear: right; }
		p.motto { width: 60%; float: right; font-style: italic; text-align: right; }
		pre { margin-left: 0.5cm; margin-bottom: 0.21cm }
	</style>
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-26332418-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</head>

<body>
<h1>PHP 4 a&nbsp;PHP 5 zároveň na jednom fyzickém serveru s Windows XP<br /><em>Quick and Dirty HowTo, Not a Definitive Guide</em></h1>
<p><a href="http://www.michalspacek.cz/">Michal Špaček</a></p>
<p class="motto">(Rev. 32, 20. listopad 2005, 00:56:46)</p>
<div>
	<p><em><strong>Obsah dnešní lekce</strong></em></p>
	<ul>
		<li>
			<a href="#uvod">Teorie strun a&nbsp;membrán aneb úvod do problematiky</a>
			<ul>
				<li><a href="#zaroven">PHP 4 a&nbsp;PHP 5 zároveň&#8230;</a></li>
				<li><a href="#jeden-stroj">&#8230; na jednom fyzickém serveru&#8230;</a></li>
				<li><a href="#windows">&#8230; s Windows XP</a></li>
			</ul>
		</li>
		<li>
			<a href="#moznosti">Kudy tudy na Karlštejn aneb možnosti konfigurace</a>
			<ul>
				<li><a href="#modul-cgi">Jeden modul, jedno CGI, jeden Apache</a></li>
				<li><a href="#dva-porty">Dva moduly, dva Apache, jedna IP adresa, dva porty</a></li>
				<li><a href="#reverzni-proxy">Dva moduly, dva Apache, jedna IP adresa, dva porty, reverzní proxy</a></li>
				<li><a href="#dve-ip">Dva moduly, dva Apache, dvě IP adresy</a></li>
				<li><a href="#hack">Dva moduly, jeden Apache, hack</a></li>
			</ul>
		</li>
	</ul>
</div>

<h2 id="uvod">Teorie strun a&nbsp;membrán aneb úvod do problematiky</h2>
<p class="motto">Jen tak namátkou Vám mohu vyjmenovat přinejmenším tři metody, jak na jakýkoli fyzický stroj dostat libovolný počet libovolných verzí
PHP, z nichž metoda současného běhu více instancí HTTP serveru je ta nejprimitivnější a&nbsp;nejdéle používaná.</p>
<p>Tento návod měl původně vzniknout o prázdninách roku 2004, tenkrát jsem měl pár měsíců svůj první notebook a&nbsp;tou
dobou také vyšla první <em>stable</em> verze PHP 5. Pochopitelně jsem chtěl na této nové verzi vyvíjet, protože přinesla mnoho novinek, vylepšení
a&nbsp;oprav chyb a&nbsp;také snížila TCO a&nbsp;spousta lidí díky ní začala používat jméno <em>Ten mladej, co nám naprogramuje ten náš
GPRMPS systém přes noc</em>. Rychlejší chladnutí kávy a&nbsp;rychlejší teplání piva jsou jedny z mála nevýhod a&nbsp;tak je ani raději nebudeme zmiňovat. Návod jsem
tenkrát nabídl maga<em>e</em>zínu Interval.cz. Stalo se, co se stalo a&nbsp;tak s menším zpožděním na četné žádosti (1+) vychází
úplně někde jinde a&nbsp;v jiné (čti svobodné) podobě se spoustou sprostých slov a&nbsp;ASCII porna.</p>

<h3 id="zaroven">PHP 4 a&nbsp;PHP 5 zároveň&#8230;</h3>
<p class="motto">Víte, proč žena při menstruaci vaří na všech plotýnkách? Sakra a&nbsp;proč by prostě nemohla?!</p>
<p>Důvod, proč provozovat PHP 4 a&nbsp;zároveň PHP 5 je vskutku jednoduchý, prostě to tak chceme. Ať už kvůli tomu, že budeme <em>ohýbat</em>
staré (čti dříve napsané) aplikace (čti skripty) a&nbsp;zároveň psát nové a&nbsp;ty staré prostě nechceme, nebo nemůžeme upravovat na nové
verzi PHP a&nbsp;ty nové, ač můžeme, tak na staré verzi PHP psát nechceme.</p>

<h3 id="jeden-stroj">&#8230; na jednom fyzickém serveru&#8230;</h3>
<p class="motto">Co je lepší než lesba v posteli? Dvě lesby v posteli.</p>
<p>Jeden fyzický server je levnější než dva a&nbsp;dva notebooky se nevejdou do jedné brašny. Toto pochopitelně platí pro vývojové
stroje, <em>production server </em>snad nikdo na notebooku neprovozuje, na druhou stranu 2<sup>3</sup> taky není 9. Jeden fyzický stroj je také vhodný
např. pro plynulý převod PHP 4 skriptů na server s PHP 5.</p>
<p>Nevýhoda je jasná už z principu, na jednom stroji běží více procesů, zabírají více paměti a&nbsp;ubírají trochu výkonu.
Mě na notebooku běží dva servery Apache, dva MySQL servery a&nbsp;přibude PostgreSQL, takže dvou HTTP serverů bych se nebál.
Koneckonců stejně všichni máme ty Intel&reg; Káthmandú procesory s 3,14 GB DDR ECC THC pamětmi, takže to je <em>zívačka</em>.</p>

<h3 id="windows">&#8230; s Windows XP</h3>
<p class="motto">This behavior is by design.</p>
<p>Tady nevím, čím bych začal, takže to vezmu <em>od lesa</em>. Na systému unixového typu snad každý administrátor dokáže
rozjet Apache na jiném portu nebo jiné IP. Na <em>woknech</em> to není tak úplně jasný, proto je návod primárně pro <em>wokna</em>.
Tím samozřejmě nevyjadřuji žádné svoje sympatie. Návod by se asi dal použít i pro nějaký unix, dejte mi vědět, jestli to někdo zkusíte a&nbsp;uspějete. Budu vděčný
nejenom za zkrácení nebo prodloužení nadpisu. Koneckonců návod je pro <em>wokna</em> i proto, že níže uváděná záplata je zkrátka pro <em>wokna</em>.</p>

<h2 id="moznosti">Kudy tudy na Karlštejn aneb možnosti konfigurace</h2>
<p class="motto">It's not how good you are, it's how bad you want it.</p>
<p>Možností jak to celé
postavit je pochopitelně několik, to už ostatně je nenásilnou
formou naznačeno v úvodu. Některé jsou vhodné,
některé nejsou vhodné a&nbsp;některé nejsou
vůbec. Mé osobě jich je známých několik,
postupně si je pochopitelně představíme. Pokud
v budoucnu spatří světlo světa nějaké další
způsoby, tento návod bude patřičně aktualizován.
Samozřejmě se budeme chtít co nejvíc přiblížit
ostrému produkčnímu prostředí, což s <em>woknama</em>
zas nebude tak jednoduché, ale to je zanedbatelný
detail. Proto ani nebudu uvádět metody typu <cite><em>&quot;spusť
tento soubor, když chceš používat PHP 4 a&nbsp;spusť jiný
soubor, když PHP 5&quot;,</em></cite> s
tím se v praxi v produkčním prostředí moc
nesetkáte. Jako dodatek uvádím, že budeme
instalovat z oficiálních distribucí, žádné
takové ty <em>42-in-1</em>
balíčky.</p>
<p>PHP je nejčastěji nainstalováno jako modul HTTP serveru.
Mohlo by se zdát, že ve chvíli, kdy chceme mít
do serveru zavedené dva PHP moduly, není nic
jednoduššího, než tyto PHP moduly prostě zavést
pomocí <code>LoadModule</code> direktivy. Ostatně, moduly
takto zavést i jdou, resp. server při zavádění
neohlásí žádnou chybu, jenže vzhledem k tomu,
že oba dva moduly se registrují pod stejný MIME typ
<code>application/x-httpd-php</code> je potom zcela jasné, že
to zkrátka nebude fungovat korektně. Dřívěji
zavedený modul je přebit zavedením jiného
modulu se stejným MIME typem. Takže když zavedeme nejdříve
PHP 4 modul a&nbsp;pak PHP 5 modul, všechny skripty se budou
zpracovávat PHP 5 modulem.</p>

<h3 id="modul-cgi">Jeden modul, jedno CGI, jeden Apache</h3>
<p class="motto">Ostatně, v tomto smyslu jsem už já sám jeden článek na Interval.cz kdysi publikoval (i když dnes už bych k publikaci takový text asi vůbec nepřijal ;-)</p>
<p>Jak jsme se dozvěděli, dva PHP moduly nejdou nainstalovat
zároveň. Ale dvě CGI verze nainstalovat jdou, mno. Dokonce
jde nainstalovat jeden PHP modul a&nbsp;zbytek PHP nainstalovat jako
CGI. Takže můžeme mít k dispozici v podstatě neomezený
počet PHP verzí. Až na to, že CGI se v ostrém
provozu moc nenosí, krom výkonnostního rozdílu
je zde také určitý rozdíl v dostupných
proměnných a&nbsp;to hlavně v poli <code>$_SERVER</code>.</p>
<p>TODO UPDATE FIXME <a href="http://interval.cz/clanek.asp?article=1740">http://interval.cz/clanek.asp?article=1740</a></p>

<h3 id="dva-porty">Dva moduly, dva Apache, jedna IP adresa, dva porty</h3>
<p class="motto">Svoboda jednoho končí tam, kde začíná svoboda druhého.</p>
<p>Pokud se tedy chceme přiblížit ostrému provozu, je
třeba provozovat dva HTTP servery a&nbsp;v každém mít
zaveden jeden modul PHP. Můj postup předpokládá
instalaci Apache 1.3 pro PHP 4 a&nbsp;Apache 2.0 pro PHP 5. Apache
standradně po instalaci naslouchá na všech dostupných
IP adresách a&nbsp;na portu 80 (direktiva <code>Listen 80</code>).
Každý server však potřebuje běžet na unikátní
kombinaci IP adresy a&nbsp;portu a&nbsp;tak se nám dva
standardně nakonfigurované servery nespustí. Jeden  ze
serverů tedy přesuneme na jiný port, např. na 81.
Přistupovat na něj pak budeme pomocí adresy
<a href="http://localhost:81/">http://localhost:81/</a>. Pokud bychom
port neuvedli, HTTP klient (prohlížeč) v tajnosti port
doplní na standardní 80, tak bychom vlastně
přistupovali na úplně jiný server, než bychom si
přáli. Sami jistě uznáte, že to není zrovna
nejpohodlnější, kdo si to má pamatovat, navíc
některé skripty nemusí vůbec počítat s tím,
že mohou být zpracovávány serverem, který
běží na jiném než standardním portu. Tento
postup je víceméně pro úplnost, nějak mě
nenapadá situace, kdy by jeden počítač měl k
dispozici pouze jednu IP adresu – každý počítač,
kde je k dispozici TCP/IP má tzv. lokální smyčku
(angl. <em>loopback device</em>), která může mít více
adres, standardně je dostupná pod IPv4 adresou <code>127.0.0.1</code>.
Nicméně vzhůru níže.</p>
<p>Nainstalujeme první Apache se standardní
konfigurací. V nastavení služeb systému se
přesvědčíme, že Apache neběží, případně
jej vypneme, aby nedošlo k případné kolizi s
instalací druhého serveru.</p>
<p>Spustíme instalaci druhého Apache, je vhodné
jej nainstalovat do jiného adresáře, než první
server. Opět necháme standardní konfiguraci a&nbsp;opět
se přesvědčíme, že Apache neběží. V konfiguračním
souboru (<code>httpd.conf</code>) druhého serveru vyhledáme
direktivu <code>Listen</code> a&nbsp;změníme její
hodnotu:</p>
<pre>Listen 81</pre><p>
Tím dosáhneme toho, že Apache po startu bude
naslouchat na všech IP adresách na portu 81. Pokud
provozujeme HTTPS, je třeba adekvátně upravit i direktivy
<code>Listen</code> pro server s podporou pro SSL – týká
se to portu 443.</p>
<p>Po dokončení konfigurace prověříme její
úspěšnost. V nastavení služeb systému
spustíme oba Apache servery a&nbsp;počkáme, jestli
nenastane konec světa. Poznáme to podle toho, jestli se
rozsvítí červený nápis <em>&quot;Všechno je
v prdeli&quot;</em>, když ne, tak se naše konfigurace povedla. Což si
ještě potvrdíme zadáním <a href="http://localhost/">http://localhost/</a>
a&nbsp;<a href="http://localhost:81/">http://localhost:81/</a> do
prohlížeče. V <em>podpisu</em> serveru bychom měli vidět
rozdílné verze.</p>
<p>Teď už stačí jen úspěšně nainstalovat PHP 4 do
prvního serveru a&nbsp;PHP 5 (nejlépe z jiného
adresáře) do druhého serveru. Soubor <code>php.ini</code>
pro PHP 4 umístíme do adresáře prvního
serveru tam, kde je soubor <code>Apache.exe</code>, <code>php.ini</code>
pro PHP 5 do adresáře s konfigurací druhého
serveru tam, kde je <code>httpd.conf</code> a&nbsp;v tomto souboru
patřičně upravíme direktivu <code>PHPIniDir</code>:</p>
<pre>PHPIniDir &quot;C:/Program Files/Apache Group/Apache2/conf&quot;</pre><p>
PEAR je možné nainstalovat společně do jednoho adresáře.
Po restartu HTTP serverů by mělo PHP 4 a&nbsp;PHP 5 fungovat
odděleně na dříve uvedených adresách.</p>

<h3 id="reverzni-proxy">Dva moduly, dva Apache, jedna IP adresa, dva porty, reverzní proxy</h3>
<p class="motto">Německy? Ani slovo, tak akorát &quot;Ich fahre nach Amsterdam.&quot;</p>
<p>Tato možnost je v podstatě to stejné jako předchozí
možnost, navíc je doplněna reverzním proxy serverem,
který nám odstraní problém s dopisováním
portu 81 do URL. Reverzní proxy je v podstatě normální
proxy, akorát stojí na druhé straně barikády
– tedy pokud možno co nejblíže serveru, dá se
použít na spoustu úžasných věcí, jak
je popsáno třeba na
<a href="http://www.root.cz/clanky/reverzni-proxy/">http://www.root.cz/clanky/reverzni-proxy/</a>.</p>
<p>Zmíním to rovnou na úvodu, na konci to pak
ještě zopakuji. Špatně nakonfigurovaný proxy server je
nebezpečný jak pro naši vlastní síť, tak pro
Internet, jako celek, z důvodů jako jsou XSS útoky, spam
apod. Špatně nakonfigurovaný proxy server vyrobíme
např. tak, že aktivujeme reverzní proxy, ale zapomeneme
vypnout standardní (dopřednou) proxy. V tuto chvíli
mlže v podstatě kdokoliv využívat našeho serveru k
přístupu na jakékoliv jiné servery na
Internetu. Na těchto serverech jsme pak vedeni my, jako ten, kdo na
ně přistupoval, což není moc dobré, zvlášť
pokud na nich byla vykonána nějaká nekalá
činnost. Proto je dobré dopřednou proxy zakázat, viz
dále.</p>
<p>Servery tedy nakonfigurujeme tak, jako v předchozím návodu
(tedy tak, aby fungovaly adresy <a href="http://localhost/">http://localhost/</a>
a&nbsp;<a href="http://localhost:81/">http://localhost:81/</a>). Nyní
&quot;aktivujeme&quot; adresu <code>php5.localhost</code> v souboru <code>hosts</code>,
který se nachází v adresáři
<code>C:\WINDOWS\system32\drivers\etc</code> a&nbsp;to tak, že k
existujícím záznamům doplníme tento
řádek:</p>
<pre>127.0.0.1       php5.localhost</pre><p>
Tím zajistíme, že první server bude dostupný
i pod adresou <a href="http://php5.localhost/">http://php5.localhost/</a>,
což na první pohled nedává moc smysl. Na druhý
pohled po pěti pivech už to vypadá lépe, protože si
vzpomeneme, že Apache zvládá virtuální
servery a&nbsp;že tudy asi vede cesta z hospody domů. Takže po
vystřízlivění se pokusíme nastavit první
server tak, aby veškeré požadavky na php5.localhost
protlačoval na druhý server. Nejdříve je pochopitelně
nutné instruovat server, aby nahrál modul zajišťující
požadovanou funkcionalitu, to zajistíme odkomentováním
následujících řádků v konfiguračním
souboru <code>httpd.conf</code>:</p>
<pre>LoadModule proxy_module modules/mod_proxy.so</pre><p>
a učiníme jej aktivním pomocí:</p>
<pre>AddModule mod_proxy.c</pre><p>
Dále je třeba povolit virtuální servery
rozlišované podle jejich jmen direktivou:</p>
<pre>NameVirtualHost *:80</pre><p>
Zjednodušeně řečeno, tím povolíme virtuální
servery na portu 80 na všech IP adresách, na kterých
Apache naslouchá. Na konec konfiguračního souboru, kde
obvykle bývají definice virtuálních
serverů, přidáme záznam pro naši reverzní
proxy:</p>
<pre>&lt;VirtualHost *:80&gt;<br />	ServerName php5.localhost<br />	ProxyPass / http://localhost:81/<br />	ProxyPassReverse / http://localhost:81/<br />&lt;/VirtualHost&gt;</pre><p>
<code>ServerName</code> specifikuje jméno virtuálního
serveru, <code>ProxyPass</code> pak aktivuje reverzní proxy –
veškeré požadavky (protože každý požadavek začíná
kořenem) budou &quot;přeposílány&quot; na server bežící
na adrese localhost na portu 81, tedy na server, kde běží
PHP 5. Požadavek na <a href="http://php5.localhost/foo/bar">http://php5.localhost/foo/bar</a>
bude prvním serverem vnitřně přesměrován na
<a href="http://localhost:81/foo/bar">http://localhost:81/foo/bar</a>.
Adresa s portem 81 bude fungovat i při přímém zadání
do prohlížeče, pochopitelně. <code>ProxyPassReverse</code>
pak zajistí zpětný překlad těch HTTP hlaviček
Location, které v sobě nesou adresu druhé serveru na
portu 81.</p>
<p>Při provozování reverzního proxy serveru je
velice vhodné zakázat normální proxy, to
provedeme pomocí direktivy <code>ProxyRequests</code>, kterou
umístíme do podmíněného bloku tak,
abychom mohli server nastartovat i bez zavedeného modulu pro
proxy servery:</p>
<pre>&lt;IfModule mod_proxy.c&gt;<br />	ProxyRequests Off<br />&lt;/IfModule&gt;</pre><p>
Tento blok umístíme někam před začátek sekce
definující virtuální servery, tedy někam
před komentáře uvedené před direktivou
<code>NameVirtualHost</code>.</p>
<p>Podobné funkcionality lze dosáhnout pomocí
modulu mod_rewrite, resp. speciálního příznaku
<code>proxy</code> (nebo <code>P</code>). Nicméně stále
tu platí podmínka, že musí být zaveden
modul pro proxy server mod_proxy, stejně jako v předchozím
případě, takže postup přes mod_rewrite v podstatě jen
umožňuje mocnější implementaci reverzního proxy
serveru, čehož my nevyužijeme. Je také třeba nezapomenout
na zakázání standardní proxy pomocí
<code>ProxyRequests Off</code>. Pravidlo pro přepis URL pro
virtuální server <code>php5.localhost</code> by pak
mohlo vypadat následovně:</p>
<pre>RewriteRule ^/(.*) http://localhost:81/$1 [P]</pre><p>
Instalace PHP do obou serverů probíhá tak, jak je
popsáno v návodu, kdy se používají dva
porty.</p>

<h3 id="dve-ip">Dva moduly, dva Apache, dvě IP adresy</h3>
<p class="motto">Slunce se skládá se dvou rozsáhlých částí, z nichž ani jedna není za normálních okolností vidět. Ale ta vnější bude vidět 29.
března 2006 v Turecku.</p>
<p>Jak jsem již uvedl, každý server musí běžet na
unikátní kombinaci IP adresy a&nbsp;portu. Pokud tedy
chceme provozovat dva HTTP servery (což musíme kvůli
instalaci dvou PHP modulů) a&nbsp;nechceme dopisovat do URL port
a&nbsp;nechceme ani provozovat reverzní proxy server, nezbývá
nám nic jiného, než spustit každý server na
jiné IP adrese. Na jakých, to záleží na
situaci, ve které jsme. Adresu <code>127.0.0.1</code> máme
k dispozici vždy, nevýhoda je ta, že je pouze lokální,
nelze na ni přistoupit z jiných počítačů. Pokud
máme do počítače zavedenu jednu veřejnou IP adresu,
pak máme možnost obsah jednoho serveru zobrazovat i ven
(pokud chceme ven obsah obou serverů, pak musíme použít
předchozí způsob s reverzní proxy). Pokud je do
počítače zavedeno více veřejných IP adres (a
to klidně i na jednu síťovou kartu), není problém
každý server spustit na jedné veřejné IP
adrese a&nbsp;můžeme bez problémů (a bez reverzní
proxy) zobrazovat obsah obou serverů celému světu. V
následujícím textu budeme předpokládat,
že nechceme světu nic ukazovat, nebo že počítač nemá
žádnou veřejnou adresu, nebo že veřejná adresa
počítače se mění v čase, ať už díky tomu,
že je počítač přenášen ze sítě do sítě,
nebo adresu mění poskytovatel připojení. Rozhodně
tedy situace bude vypadat tak, že jeden server bude spuštěn na
adrese <code>127.0.0.1</code> a&nbsp;druhý na <code>127.0.0.2</code>.
Windows XP se Service Pack 2 standardně povolí přístup
pouze na první zmiňovanou adresu, je tedy potřeba speciální
update, který povolí připojení i na ostatní
adresy v rozsahu lokální smyčky. Tento update má
číslo 884020 a&nbsp;lze jej stáhnout z
<a href="http://support.microsoft.com/kb/884020/">http://support.microsoft.com/kb/884020/</a>.
Je potřeba jej nainstalovat před spuštěním druhého
serveru.</p>
<p>Nainstalujeme tedy první server, ve službách
systému se přesvědčíme, že není spuštěn,
případně službu zastavíme. Nainstalujeme druhý
server a&nbsp;opět zajistíme, aby nebyl spuštěn. Nyní
se vrhneme na konfiguraci prvního serveru, otevřeme tedy
soubor <code>httpd.conf</code>, najdeme ten správný
řádek a&nbsp;nastavíme, aby server naslouchal na té
správné adrese:</p>
<pre>Listen 127.0.0.1:80</pre><p>
To samé provedeme v konfiguračním souboru druhého
serveru, jen řádek bude vypadat trochu jinak:</p>
<pre>Listen 127.0.0.2:80</pre><p>
Poté ve službách systému oba dva servery
spustíme. Do prohlížeče zadáme zkušebně
<a href="http://127.0.0.1/">http://127.0.0.1</a>, měl by nám
odpovědět první server a&nbsp;<a href="http://127.0.0.2/">http://127.0.0.2</a>,
měl by odpovědět druhý server. Ty čísla nejsou
zrovna moc přívětivá a&nbsp;tak si je trochu
polidštíme. V souboru <code>hosts</code> je již uveden
záznam pro první adresu (<code>localhost</code>), takže
stačí přidat záznam pro tu druhou:</p>
<pre>127.0.0.2       php5.localhost</pre>
<p>
Nyní by tedy servery měly být dostupné pod
adresami <a href="http://localhost/">http://localhost/</a>
a&nbsp;<a href="http://php5.localhost/">http://php5.localhost/</a>.</p>
<p>Instalace PHP do serverů probíhá stejně tak, jak
je popsáno v návodu, kdy se používají
dva porty.</p>

<h3 id="hack">Dva moduly, jeden Apache, hack</h3>
<p class="motto">Nejdůležitější nástroj hackera je vypalovačka.</p>
<p>Tato poslední možnost je určena pro experimentátory,
spočívá v úpravě zdrojových kódů
PHP, případně v úpravě binární
distribuce. Oficiálně jsem ji nikde neviděl uváděnou,
takže spíš pro zajímavost, je možné, že
změna má nějaké vedlejší účinky. Oba
dva moduly PHP si registrují stejný MIME typ
<code>application/x-httpd-php</code>, takže je celkem problém
rozlišit jeden od druhého. úprava tedy spočívá
ve změně typu jednoho modulu na něco jiného a&nbsp;modul s
takto upravným typem pak bude zpracovávat soubory
určené např. pro PHP 4, zatímco modul s původním
typem pak soubory určené pro PHP 5. Přiřazení je
možné provést pomocí direktivy <code>AddType</code>
na úrovni přípon souborů, virtuálních
serverů nebo na úrovni adresářů.</p>
<p>TODO UPDATE FIXME <a href="http://forum.builder.cz/read.php?20,991619,994783#msg-994783">http://forum.builder.cz/read.php?20,991619,994783#msg-994783</a></p>
</body>
</html>
