<?php
session_start();
$csp = (isset($_GET['csp']) ? $_GET['csp'] : '');
$report = "report-uri /xss/csp-report.php?report";
switch ($csp) {
	case 'none':
		header("Content-Security-Policy: default-src 'none'; {$report}");
		break;
	case 'inline':
		header("Content-Security-Policy: default-src 'none'; script-src 'unsafe-inline'; {$report}");
		break;
	case 'google':
		header("Content-Security-Policy: default-src 'none'; script-src 'unsafe-inline' ajax.googleapis.com; {$report}");
		break;
	case 'yahoo':
		header("Content-Security-Policy: default-src 'none'; script-src 'unsafe-inline' yui.yahooapis.com; {$report}");
		break;
}
?>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="https://yui.yahooapis.com/3.13.0/build/yui/yui-min.js"></script>
<script>alert('jQuery: ' + typeof $);</script>
<script>alert('YUI: ' + typeof YUI);</script>
<script>alert('inline');</script>
<p><a href="?csp=none">CSP = none</a></p>
<p><a href="?csp=inline">CSP = inline</a></p>
<p><a href="?csp=google">CSP = google</a></p>
<p><a href="?csp=yahoo">CSP = yahoo</a></p>
